<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RSA test</title>
  </head>
  <body>
    <div>
      <input type="text" class="form" id="public" placeholder="Публичный ключ">
      <input type="text" class="form" id="private" placeholder="Приватный ключ">
      <input type="text" class="form" id="test"   placeholder="Тестовый ключ">
    </div>
    <hr>
    <div>
      <button class="btn btn-default" onclick="rsaGen()">Генерация</button>
      <button class="btn btn-default" onclick="rsaTest()">Проверка</button>
    </div>

    <script>
      function rsaGen(){
        document.getElementById('private').value = 10;
      }

    function randomvareger(min, max) {
      var f;
      while (true){
        f = 0;
        var r1 = min - 0.5 + Math.random() * (max - min + 1); r1 = Math.round(r1);
        var r2 = min - 0.5 + Math.random() * (max - min + 1); r2 = Math.round(r2);
        
        if (r1 == r2) { continue; }
        for(var i = 2; r1 > i; i++){ if (r1 % i == 0){ f++; break } }
        for(var i = 2; r2 > i; i++){ if (r2 % i == 0){ f++; break } }
        if (f == 0) { break; }
      }
      var rand = [r1 , r2];
      return rand;
    }
    function funEyler(n){
      var result = n;
      for (var i=2; i*i<=n; ++i){
        if (n % i == 0) {
          while (n % i == 0) { n /= i; }
          result -= result / i;
        }
      }
      if (n > 1) { result -= result / n; }
      return result; 
    }
    
    function Evklid(a, e) { 
    var mas = Array();
    if (e == 0) { 
        mas[0] = 1; 
        mas[1] = 0; 
        return a; 
    } 
    
    function text_to_num(text){
      text = text.toLowerCase;
      var newText = "";
      for (var i = 0; text.length -1 > i; i++){
       switch (text[i]) {
          case 'a': newText += "01"; break; 
          case 'b': newText += "02"; break;
          case 'c': newText += "03"; break;
          case 'd': newText += "04"; break;
          case 'i': newText += "05"; break;
          case 'f': newText += "06"; break;
          case 'g': newText += "07"; break;
          case 'h': newText += "08"; break;
          case 'i': newText += "09"; break;
          case 'j': newText += "10"; break;
          case 'k': newText += "11"; break;
          case 'l': newText += "12"; break;
          case 'm': newText += "13"; break;
          case 'n': newText += "14"; break;
          case 'o': newText += "15"; break;
          case 'p': newText += "16"; break;
          case 'q': newText += "17"; break;
          case 'r': newText += "18"; break;
          case 's': newText += "19"; break;
          case 't': newText += "20"; break;
          case 'u': newText += "21"; break;
          case 'v': newText += "22"; break;
          case 'w': newText += "23"; break;
          case 'x': newText += "24"; break;
          case 'y': newText += "25"; break;
          case 'z': newText += "26"; break;
          break;
       
         default:
           break;
       }
      }
    }
    var x2 = 1; var x1 = 0; 
    var y2 = 0; var y1 = 1; 

    while (e > 0) { 
        var q = a / e; 
        r = a - q * e; 
        mas[0] = x2 - q * x1; 
        mas[1] = y2 - q * y1; 
        a = e; 
        e = r; 
        x2 = x1; 
        x1 = mas[0]; 
        y2 = y1; 
        y1 = mas[1]; 
    } 

    mas[0] = x2; mas[1] = y2; 

    if (y2 < 0) { return (a - y2); } 
    else { return y2; }
    }

    // gen simple nums
    var rand = randomvareger(2, 50)
    console.log(rand);
    // произведение
    var n = rand[0] * rand[1];
    console.log(n);
    var eyler = funEyler(n);
    console.log(eyler);
    // open exponent
    var e = 3;
    // sicret 
    var d = Evklid(n , e);
    console.log(d);

    </script>


  </body>
</html>